model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,4)", gamma = "lognormal(0,10)"),
data = dt)
setwd("~/Documents/spsurv")
devtools::load_all(".")
setwd("~/Documents/spsurv")
devtools::load_all(".")
setwd("~/Documents/spsurvsim")
dt <- data.table::fread("data/aft_llogis_1_500.txt")
spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,4)", gamma = "lognormal(0,10)"),
data = dt)
devtools::load_all(".")
setwd("~/Documents/spsurvsim")
dt <- data.table::fread("data/aft_llogis_1_500.txt")
spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,4)", gamma = "lognormal(0,10)"),
data = dt)
devtools::load_all(".")
devtools::load_all(".")
devtools::load_all(".")
dt <- fread("../spsurvsim/data/aft_llogis_1_500.txt")
library(data.table)
dt <- fread("../spsurvsim/data/aft_llogis_1_500.txt")
spbp(Surv(y, status)~ numerical, categorical, data = dt)
spbp(Surv(y, status)~ numerical + categorical, data = dt)
spbp(Surv(y, status)~ numerical + categorical, data = dt, model = "aft
)
)
gc()
spbp(Surv(y, status)~ numerical + categorical, data = dt, model = "aft")
spbp(Surv(y, status)~ numerical + categorical, data = dt, model = "aft", approach = "bayes")
devtools::load_all(".")
spbp(Surv(y, status)~ numerical + categorical, data = dt, model = "aft", approach = "bayes")
devtools::load_all(".")
spbp(Surv(y, status)~ numerical + categorical, data = dt, model = "aft", approach = "bayes")
library(data.table)
dt <- fread("../spsurvsim/data/aft_llogis_1_500.txt")
spbp(Surv(y, status)~ numerical + categorical, data = dt, model = "aft", approach = "bayes")
library(data.table)
dt <- fread("../spsurvsim/data/aft_llogis_1_500.txt")
spbp(Surv(y, status)~ numerical + categorical, data = dt, model = "aft", approach = "bayes")
devtools::load_all(".")
devtools::load_all(".")
devtools::load_all(".")
devtools::load_all(".")
devtools::load_all(".")
devtools::load_all(".")
spbp(Surv(y, status)~ numerical + categorical, data = dt, model = "aft", approach = "bayes")
devtools::load_all(".")
devtools::load_all(".")
devtools::load_all(".")
devtools::load_all(".")
spbp(Surv(y, status)~ numerical + categorical, data = dt, model = "aft", approach = "bayes")
library(data.table)
dt <- fread("../spsurvsim/data/aft_llogis_1_500.txt")
spbp(Surv(y, status)~ numerical + categorical, data = dt, model = "aft", approach = "bayes")
devtools::load(".")
devtools::load_all(".")
library(data.table)
dt <- fread("../spsurvsim/data/aft_llogis_1_500.txt")
spbp(Surv(y, status)~ numerical + categorical, data = dt, model = "aft", approach = "bayes")
library(spsurv)
spbp(Surv(y, status)~ numerical + categorical, data = dt, model = "aft", approach = "bayes")
spsurv::spbp(Surv(y, status)~ numerical + categorical, data = dt, model = "aft", approach = "bayes")
devtools::load_all(".")
setwd("~/Documents/spsurvsim")
dt <- data.table::fread("data/aft_llogis_1_500.txt")
spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,4)", gamma = "lognormal(0,10)"),
data = dt)
spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,4)", gamma = "lognormal(0,10)"),
data = dt[1:100])
spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,4)", gamma = "lognormal(0,10)"),
data = dt[1:100,])
devtools::load_all(".")
devtools::load_all(".")
setwd("~/Documents/spsurv")
devtools::load_all(".")
setwd("~/Documents/spsurvsim")
dt <- data.table::fread("data/aft_llogis_1_500.txt")
spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,4)", gamma = "lognormal(0,10)"),
data = dt[1:100,])
setwd("~/Documents/spsurvsim")
dt <- data.table::fread("data/aft_llogis_1_500.txt")
spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,4)", gamma = "lognormal(0,10)"),
data = dt[1:100,])
setwd("~/Documents/spsurvsim")
dt <- data.table::fread("data/aft_llogis_1_500.txt")
spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,4)", gamma = "lognormal(0,10)"),
data = dt[1:100,])
setwd("~/Documents/spsurvsim")
dt <- data.table::fread("data/aft_llogis_1_500.txt")
spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,4)", gamma = "lognormal(0,10)"),
data = dt[1:100,])
dt <- data.table::fread("data/aft_llogis_1_500.txt")
spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,4)", gamma = "lognormal(0,10)"),
data = dt[1:100,])
inittime <- Sys.time()
spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,4)", gamma = "lognormal(0,10)"),
data = dt[1:100,])
inittime <- Sys.time()
spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,4)", gamma = "lognormal(0,10)"),
data = dt[1:100,])
endtime <- Sys.time()
devtools::load_all(".")
setwd("~/Documents/spsurv")
setwd("~/Documents/spsurvsim")
dt <- data.table::fread("data/aft_llogis_1_500.txt")
inittime <- Sys.time()
fit <- spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,4)", gamma = "lognormal(0,10)"),
data = dt[1:100,])
endtime <- Sys.time()
inittime - endtime
inittime - endtime
inittime - endtime
inittime - endtime
endtime- inittime
setwd("~/Documents/spsurvsim")
dt <- data.table::fread("data/aft_llogis_1_500.txt")
inittime <- Sys.time()
fit <- spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,4)", gamma = "lognormal(0,10)"),
data = dt[1:100,])
endtime <- Sys.time()
endtime- inittime
setwd("~/Documents/spsurvsim")
dt <- data.table::fread("data/aft_llogis_1_500.txt")
inittime <- Sys.time()
fit <- spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,4)", gamma = "lognormal(0,10)"),
data = dt)
setwd("~/Documents/spsurvsim")
dt <- data.table::fread("data/aft_llogis_1_500.txt")
inittime <- Sys.time()
fit <- spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,4)", gamma = "lognormal(0,10)"),
data = dt[100,])
endtime <- Sys.time()
endtime- inittime
setwd("~/Documents/spsurvsim")
dt <- data.table::fread("data/aft_llogis_1_500.txt")
inittime <- Sys.time()
fit <- spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,4)", gamma = "lognormal(0,10)"),
data = dt[100,])
endtime <- Sys.time()
endtime- inittime
setwd("~/Documents/spsurvsim")
dt <- data.table::fread("data/aft_llogis_1_500.txt")
inittime <- Sys.time()
fit <- spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,4)", gamma = "lognormal(0,10)"),
data = dt[100,])
endtime <- Sys.time()
endtime- inittime
setwd("~/Documents/spsurvsim")
dt <- data.table::fread("data/aft_llogis_1_500.txt")
inittime <- Sys.time()
fit <- spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,4)", gamma = "lognormal(0,10)"),
data = dt[100,])
endtime <- Sys.time()
endtime- inittime
setwd("~/Documents/spsurvsim")
dt <- data.table::fread("data/aft_llogis_1_500.txt")
library(spsurv)
fit <- spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,4)", gamma = "lognormal(0,10)"),
data = dt[100,])
fit <- spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,4)", gamma = "lognormal(0,10)"),
data = dt)
fit <- spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,4)", gamma = "lognormal(0,10)"),
data = dt[100,])
setwd("~/Documents/spsurvsim")
dt <- data.table::fread("data/aft_llogis_1_500.txt")
inittime <- Sys.time()
library(spsurv)
fit <- spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,4)", gamma = "lognormal(0,10)"),
data = dt[100,])
fit <- spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,4)", gamma = "lognormal(0,10)"),
data = dt[1:100,])
setwd("~/Documents/spsurvsim")
dt <- data.table::fread("data/aft_llogis_1_500.txt")
inittime <- Sys.time()
library(spsurv)
fit <- spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,4)", gamma = "lognormal(0,10)"),
data = dt[1:100,])
endtime <- Sys.time()
endtime- inittime
setwd("~/Documents/spsurvsim")
dt <- data.table::fread("data/aft_llogis_1_500.txt")
inittime <- Sys.time()
library(spsurv)
fit <- spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,4)", gamma = "lognormal(0,10)"),
data = dt[1:100,])
fit <- spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,10)", gamma = "lognormal(0,10)"),
data = dt[1:100,])
setwd("~/Documents/spsurv")
devtools::load_all(".")
fit <- spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,10)", gamma = "lognormal(0,10)"),
data = dt[1:100,])
fitaft <- spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,10)", gamma = "lognormal(0,10)"),
data = dt[1:100,])
setwd("~/Documents/spsurvsim")
dt <- data.table::fread("data/aft_llogis_1_500.txt")
inittime <- Sys.time()
library(spsurv)
fitaft <- spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,10)", gamma = "lognormal(0,10)"),
data = dt[1:100,])
fitpo <- spbp(Surv(y,status) ~ numerical + categorical,
model = "po",
approach = "bayes",
priors = list(beta = "normal(0,10)", gamma = "lognormal(0,10)"),
data = dt[1:100,])
fitph <- spbp(Surv(y,status) ~ numerical + categorical,
model = "ph",
approach = "bayes",
priors = list(beta = "normal(0,10)", gamma = "lognormal(0,10)"),
data = dt[1:100,])
endtime <- Sys.time()
endtime- inittime
fitaft
fitph
fitpo
setwd("~/Documents/spsurvsim")
dt <- data.table::fread("data/aft_llogis_2_500.txt")
inittime <- Sys.time()
library(spsurv)
fitaft <- spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,10)", gamma = "lognormal(0,10)"),
data = dt[1:100,])
fitpo <- spbp(Surv(y,status) ~ numerical + categorical,
model = "po",
approach = "bayes",
priors = list(beta = "normal(0,10)", gamma = "lognormal(0,10)"),
data = dt[1:100,])
fitph <- spbp(Surv(y,status) ~ numerical + categorical,
model = "ph",
approach = "bayes",
priors = list(beta = "normal(0,10)", gamma = "lognormal(0,10)"),
data = dt[1:100,])
endtime <- Sys.time()
endtime- inittime
fitaft
fitph
fitpo
1000*2
1000*2/60
setwd("~/Documents/spsurvsim")
dt <- data.table::fread("data/aft_llogis_2_500.txt")
inittime <- Sys.time()
library(spsurv)
fitaft <- spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,10)", gamma = "lognormal(0,10)"),
data = dt[1:100,])
fitpo <- spbp(Surv(y,status) ~ numerical + categorical,
model = "po",
approach = "bayes",
priors = list(beta = "normal(0,10)", gamma = "lognormal(0,10)"),
data = dt[1:100,])
fitph <- spbp(Surv(y,status) ~ numerical + categorical,
model = "ph",
approach = "bayes",
priors = list(beta = "normal(0,10)", gamma = "lognormal(0,10)"),
data = dt[1:200,])
endtime <- Sys.time()
endtime- inittime
fitaft
fitph
fitpo
endtime- inittime
fitaft
setwd("~/Documents/spsurvsim")
dt <- data.table::fread("data/aft_llogis_2_500.txt")
inittime <- Sys.time()
library(spsurv)
fitaft <- spbp(Surv(y,status) ~ numerical + categorical,
model = "aft",
approach = "bayes",
priors = list(beta = "normal(0,10)", gamma = "lognormal(0,10)"),
data = dt[1:200,])
-4.78/2
.39/2
setwd("~/Documents/spsurv")
fitph <- spbp(Surv(y,status) ~ numerical + categorical,
model = "ph",
approach = "bayes",
priors = list(beta = "normal(0,10)", gamma = "lognormal(0,10)"),
data = dt[1:200,])
source('~/Documents/spsurv/script/load.R', echo=TRUE)
setwd("~/Documents/spsurv")
if(!require(roxygen2)) install.packages('roxygen2')
if(!require(rstan)) install.packages('rstan')
if(!require(pkgbuild)) install.packages('pkgbuild')
if(!require(rstantools)) install.packages('rstantools')
if(!require(Rcpp)) install.packages('Rcpp')
try(remove.packages("spsurv", lib="~/R/x86_64-pc-linux-gnu-library/3.6"),
silent = T)
try(roxygen2::roxygenize(clean = T), silent = T)
pkgbuild::compile_dll()
devtools::document()
devtools::install()
devtools::load_all(".")
devtools::build()
?spsurv::spbp
source('~/Documents/spsurv/script/load.R')
rm(list = ls())
library("spsurv")
## 1. Larynx
library("KMsurv")
data("larynx")
# BPPH
bpphmle1 <- spbp(formula = Surv(time, delta) ~ age + factor(stage),
data = larynx,
approach = "mle",
model = "ph")
summary(bpphmle1)
bpphbe1 <- spbp(Surv(time, delta)~ age + factor(stage),
data = larynx,
approach  = "bayes",
model = "ph")
# BPPO
bppomle1 <- spsurv::spbp(formula = Surv(time, delta)~ age + factor(stage),
data = larynx,
approach = "mle",
model = "po")
summary(bppomle1)
bppobe1 <- spbp(Surv(time, delta)~ age + factor(stage), scale = T,
data = larynx,
approach  = "bayes",
model = "po")
summary(bppobe1)
# BPAFT
bpaftmle1 <- spsurv::spbp(formula = Surv(time, delta)~ age + factor(stage),
data = larynx,
approach = "mle",
model = "aft")
# BPAFT
bpaftmle1 <- spsurv::spbp(formula = Surv(time, delta)~ age + factor(stage),
data = larynx,
approach = "mle",
model = "aft")
source('~/Documents/spsurv/script/load.R')
# BPAFT
bpaftmle1 <- spsurv::spbp(formula = Surv(time, delta)~ age + factor(stage),
data = larynx,
approach = "mle",
model = "aft")
source('~/Documents/spsurv/script/load.R')
# BPAFT
bpaftmle1 <- spsurv::spbp(formula = Surv(time, delta)~ age + factor(stage),
data = larynx,
approach = "mle",
model = "aft")
rm(list = ls())
library("spsurv")
## 1. Larynx
library("KMsurv")
data("larynx")
# BPPH
bpphmle1 <- spbp(formula = Surv(time, delta) ~ age + factor(stage),
data = larynx,
approach = "mle",
model = "ph")
summary(bpphmle1)
bpphbe1 <- spbp(Surv(time, delta)~ age + factor(stage),
data = larynx,
approach  = "bayes",
model = "ph")
summary(bpphbe1)
# BPPO
bppomle1 <- spsurv::spbp(formula = Surv(time, delta)~ age + factor(stage),
data = larynx,
approach = "mle",
model = "po")
summary(bppomle1)
bppobe1 <- spbp(Surv(time, delta)~ age + factor(stage), scale = T,
data = larynx,
approach  = "bayes",
model = "po")
summary(bppobe1)
# BPAFT
bpaftmle1 <- spsurv::spbp(formula = Surv(time, delta)~ age + factor(stage),
data = larynx,
approach = "mle",
model = "aft")
remove.packages("spsurv")
library("spsurv")
devtools::load_all(".")
veteran$celltype <- factor(celltype, c("large", "adeno", "smallcell", "squamous"))
fitmle2 <- spsurv::spbp(formula = Surv(time, status) ~ karno + celltype,
data = veteran, approach = "mle", model = "aft", scale = T)
source('~/Documents/spsurv/script/load.R')
getwd()
library("data.table")
fread("../spsurvsim/data/aft_llogis_1_500.txt")
dt <- fread("../spsurvsim/data/aft_llogis_1_500.txt")
fit <- spbp(Surv(y, status) ~ numerical + categorical,
data = dt[1:100,], approach = "bayes")
fit <- spbp(Surv(y, status) ~ numerical + categorical,
data = dt[1:100,], model="aft", approach = "bayes")
fit <- spbp(Surv(y, status) ~ numerical + categorical,
data = dt[1:100,], model="ph", approach = "bayes")
fit <- spbp(Surv(y, status) ~ numerical + categorical,
data = dt[1:100,], model="aft", approach = "bayes")
source('~/Documents/spsurv/script/load.R')
library("data.table")
dt <- fread("../spsurvsim/data/aft_llogis_1_500.txt")
init <- Sys.time()
fit <- spbp(Surv(y, status) ~ numerical + categorical,
data = dt[1:100,], model="aft", approach = "bayes")
end <- Sys.time()
print(fit)
summary(fit)
end-init
dt <- fread("../spsurvsim/data/aft_llogis_1_500.txt")
init <- Sys.time()
fit <- spbp(Surv(y, status) ~ numerical + categorical,
data = dt[1:100,], model="aft", approach = "bayes")
source('~/Documents/spsurv/script/load.R')
source('~/Documents/spsurv/script/load.R')
warnings()
devtools::install()
source('~/Documents/spsurv/script/load.R')
warnings()
remove.packages(spsurv)
